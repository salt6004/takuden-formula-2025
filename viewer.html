<!-- 
  TAKUDEN Official Website - First View Widget
  Design & Engineering: Web Creative Director Style
-->

<div id="takuden-hero-section" class="relative w-full overflow-hidden bg-[#0a0a0a] font-['Inter','Noto_Sans_JP',sans-serif]">
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@900&family=Noto+Sans+JP:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        /* CSS Scope to #takuden-hero-section */
        #takuden-hero-section {
            height: 100vh;
            height: 100svh;
            color: #ffffff;
            --neon-orange: #ff6b00;
        }

        /* Loading Overlay */
        #takuden-hero-section #loader-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease-in-out;
        }

        #takuden-hero-section .loading-text {
            font-size: 0.875rem;
            letter-spacing: 0.3em;
            color: var(--neon-orange);
            text-transform: uppercase;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* 3D Model Styling */
        #takuden-hero-section model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
            --poster-color: transparent;
            opacity: 0;
            transform: scale(0.9) translateY(50px);
            transition: opacity 1.5s ease-out, transform 2s cubic-bezier(0.16, 1, 0.3, 1);
        }

        #takuden-hero-section model-viewer.reveal {
            opacity: 0.7;
            transform: scale(1) translateY(0);
        }

        /* Typography */
        #takuden-hero-section .hero-title {
            font-size: clamp(3rem, 10vw, 8rem);
            line-height: 0.9;
            letter-spacing: -0.02em;
            text-shadow: 0 0 20px rgba(255, 107, 0, 0.3);
            opacity: 0;
            filter: blur(10px);
        }

        #takuden-hero-section .keyword-flash {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 900;
            font-size: clamp(1.5rem, 5vw, 4rem);
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            color: var(--neon-orange);
            mix-blend-mode: overlay;
        }

        /* Scroll Hint */
        #takuden-hero-section .scroll-hint {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        #takuden-hero-section .scroll-line {
            width: 1px;
            height: 60px;
            background: linear-gradient(to bottom, var(--neon-orange), transparent);
            animation: scrollLine 2s infinite;
        }

        @keyframes scrollLine {
            0% { transform: scaleY(0); transform-origin: top; }
            50% { transform: scaleY(1); transform-origin: top; }
            51% { transform: scaleY(1); transform-origin: bottom; }
            100% { transform: scaleY(0); transform-origin: bottom; }
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            #takuden-hero-section .hero-title {
                font-size: 4rem;
            }
        }
    </style>

    <!-- 1. Loader -->
    <div id="loader-overlay">
        <div class="loading-text">Now Loading...</div>
    </div>

    <!-- 2. Animation Layers -->
    <div id="flash-container" class="absolute inset-0 z-20 flex items-center justify-center">
        <div class="keyword-flash">Student Formula EV Challenge</div>
        <div class="keyword-flash">Design & Manufacturing</div>
        <div class="keyword-flash">Teamwork & Passion</div>
    </div>

    <!-- 3. Main Hero Content -->
    <div class="relative z-10 w-full h-full flex flex-col items-center justify-center p-6 text-center">
        <div id="club-label" class="mb-4 opacity-0 -translate-y-4 text-xs md:text-sm tracking-[0.4em] uppercase text-gray-400 font-bold">
            TAKUDEN — Takushoku Univ. EV Club
        </div>
        
        <h1 id="main-title" class="hero-title font-black italic">
            DRIVE THE <span style="color: #ff6b00;">FUTURE</span>
        </h1>

        <p id="sub-catch" class="mt-6 opacity-0 translate-y-4 text-gray-300 text-sm md:text-lg max-w-2xl font-light tracking-widest leading-relaxed">
            ゼロからマシンを創り上げ、<br class="md:hidden">サーキットを駆け抜ける
        </p>

        <!-- 4. 3D Model -->
        <div class="absolute inset-0 z-0 pointer-events-none">
            <model-viewer
                id="ev-model"
                src="https://salt6004.github.io/takuden-formula-2025/car.glb"
                alt="TAKUDEN Formula Car"
                camera-controls
                auto-rotate
                auto-rotate-delay="0"
                rotation-per-second="10deg"
                shadow-intensity="2"
                exposure="0.5"
                environment-image="neutral"
                camera-orbit="45deg 75deg 5m"
                min-camera-orbit="auto 0deg auto"
                max-camera-orbit="auto 90deg auto"
                disable-zoom
            >
            </model-viewer>
        </div>

        <!-- 5. Scroll Indicator -->
        <div class="scroll-hint">
            <span class="text-[10px] tracking-[0.3em] text-orange-500 font-bold uppercase">Scroll to Explore</span>
            <div class="scroll-line"></div>
        </div>
    </div>

    <script>
        window.addEventListener('load', () => {
            const modelViewer = document.querySelector('#ev-model');
            const loader = document.querySelector('#loader-overlay');
            const keywords = document.querySelectorAll('.keyword-flash');
            const tl = gsap.timeline();

            // 3Dモデル読み込み完了後の処理
            modelViewer.addEventListener('load', () => {
                // 1. Loader Hide
                tl.to(loader, {
                    opacity: 0,
                    duration: 1,
                    delay: 0.5,
                    onComplete: () => loader.style.display = 'none'
                });

                // 2. Keyword Flashback (Cinematic Effect)
                keywords.forEach((keyword, index) => {
                    tl.to(keyword, {
                        opacity: 0.8,
                        duration: 0.05,
                        scale: 1.1,
                    }, `flash+=${index * 0.2}`);
                    tl.to(keyword, {
                        opacity: 0,
                        duration: 0.05,
                        filter: "blur(20px)",
                    });
                });

                // 3. Main Entrance
                tl.to("#main-title", {
                    opacity: 1,
                    filter: "blur(0px)",
                    duration: 1.5,
                    ease: "power4.out"
                }, "+=0.2");

                tl.to("#club-label", {
                    opacity: 1,
                    y: 0,
                    duration: 0.8
                }, "-=1");

                tl.to("#sub-catch", {
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    ease: "power2.out"
                }, "-=0.5");

                // 4. Reveal 3D Model with Light up effect
                tl.add(() => {
                    modelViewer.classList.add('reveal');
                    // Exposure Animation (Flashlight effect)
                    gsap.to(modelViewer, {
                        attr: { exposure: 1.2 },
                        duration: 2,
                        ease: "power2.inOut"
                    });
                }, "-=1.5");

                // 5. Scroll Hint
                tl.to(".scroll-hint", {
                    opacity: 1,
                    duration: 1
                });
            });
        });

        // Interactive: Mouse move shifts the 3D model slightly
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 20;
            const y = (e.clientY / window.innerHeight - 0.5) * 20;
            gsap.to("#ev-model", {
                x: x,
                y: y,
                duration: 2,
                ease: "power2.out"
            });
        });
    </script>
</div>
