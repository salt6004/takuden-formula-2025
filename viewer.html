<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAKUDEN FUTURE | Engineering the Edge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,900;1,900&family=Noto+Sans+JP:wght@100;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff6b00;
            --bg: #030303;
        }

        body, html {
            margin: 0;
            padding: 0;
            background-color: var(--bg);
            color: #fff;
            overflow: hidden;
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            cursor: crosshair;
        }

        /* シネマティック・グレイン */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_Grain.png');
            opacity: 0.04;
            pointer-events: none;
            z-index: 999;
        }

        #hero {
            height: 100vh;
            width: 100vw;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* 3D Viewport */
        .viewer-wrap {
            position: absolute;
            inset: 0;
            z-index: 1;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
            outline: none;
            --poster-color: transparent;
            opacity: 0;
        }

        /* タイトルコンテナ */
        .title-container {
            position: relative;
            z-index: 10;
            pointer-events: none;
            text-align: center;
        }

        .main-heading {
            font-size: clamp(3rem, 12vw, 10rem);
            line-height: 0.85;
            letter-spacing: -0.05em;
            font-weight: 900;
        }

        /* 視認性向上のためのシャドウとグロー */
        #t-1 {
            text-shadow: 0 0 30px rgba(0,0,0,0.8), 0 4px 10px rgba(0,0,0,0.9);
        }

        #t-2 {
            /* オレンジ色の文字にネオンのようなグローを追加 */
            text-shadow: 
                0 0 10px rgba(255, 107, 0, 0.4),
                0 0 20px rgba(255, 107, 0, 0.2),
                0 4px 15px rgba(0,0,0,0.9);
        }

        #tagline {
            text-shadow: 0 2px 10px rgba(0,0,0,1);
        }

        /* Loader */
        #loader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>

<div id="loader">
    <div class="flex flex-col items-center">
        <div class="w-64 h-[1px] bg-white/10 relative overflow-hidden">
            <div id="progress" class="absolute inset-y-0 left-0 w-0 bg-orange-600 shadow-[0_0_20px_#ff6b00]"></div>
        </div>
        <div class="mt-6 text-[9px] tracking-[1.2em] text-white/40 uppercase">Syncing Drive Systems</div>
    </div>
</div>

<div id="hero">
    <div class="absolute inset-0 border-[1px] border-white/5 m-4 md:m-8 pointer-events-none z-20"></div>
    
    <div class="absolute top-10 left-10 md:top-12 md:left-12 z-20">
        <div id="brand-tag" class="text-[10px] font-bold tracking-[0.5em] text-white/50 opacity-0 -translate-y-4">
            FORMULA EV / TAKUSHOKU UNIV.
        </div>
    </div>

    <div class="viewer-wrap">
        <model-viewer 
            id="ev-model"
            src="https://salt6004.github.io/takuden-formula-2025/car.glb"
            camera-controls
            disable-zoom="false"
            touch-action="pan-y"
            shadow-intensity="2"
            exposure="0" 
            environment-image="neutral"
            camera-orbit="0deg 90deg 20000m" 
            min-camera-orbit="auto auto 2m"
            max-camera-orbit="auto auto 25000m"
            interpolation-decay="100"
            rotation-per-second="45deg"
            alt="Takuden EV Formula Car"
        >
        </model-viewer>
    </div>

    <div class="title-container">
        <h1 class="main-heading">
            <span id="t-1" class="block italic opacity-0">TAKUDEN</span>
            <span id="t-2" class="block text-orange-600 opacity-0">FUTURE</span>
        </h1>
        
        <div class="mt-10 relative inline-block">
            <p id="tagline" class="text-white text-base md:text-2xl font-bold tracking-[0.6em] opacity-0 translate-y-8">
                挑戦した分だけ、強くなる
            </p>
            <div id="tagline-bar" class="absolute -bottom-4 left-1/2 -translate-x-1/2 w-0 h-[1px] bg-orange-600"></div>
        </div>
    </div>
</div>

<script>
    window.addEventListener('load', () => {
        const model = document.querySelector('#ev-model');
        const prog = document.querySelector('#progress');
        
        gsap.to(prog, { 
            width: "100%", 
            duration: 1.5, 
            ease: "power2.inOut", 
            onComplete: startCinematic 
        });

        function startCinematic() {
            const tl = gsap.timeline();
            
            tl.to("#loader", { 
                opacity: 0, 
                duration: 1.2, 
                onComplete: () => {
                    document.getElementById('loader').style.display = 'none';
                }
            });

            tl.to(model, { opacity: 1, duration: 0.1 });
            
            // 20,000mの彼方から3,000mの引きの構図まで接近
            tl.to(model, {
                attr: { "camera-orbit": "45deg 80deg 3000m" },
                duration: 8,
                ease: "expo.out"
            }, "-=0.8");

            tl.to(model, {
                attr: { exposure: 1.4 },
                duration: 6,
                ease: "power2.inOut"
            }, "-=7.2");

            tl.to("#brand-tag", { opacity: 1, y: 0, duration: 1 }, "-=6.5");
            tl.to("#t-1", { opacity: 1, duration: 2.5, ease: "power2.out" }, "-=6.0");
            tl.to("#t-2", { opacity: 1, duration: 2.5, ease: "power2.out" }, "-=5.7");

            tl.to("#tagline", { opacity: 1, y: 0, duration: 1.5, ease: "power3.out" }, "-=4.5");
            tl.to("#tagline-bar", { width: "140%", duration: 2.5, ease: "expo.inOut" }, "-=4.2");

            tl.add(() => {
                model.autoRotate = true;
                model.autoRotateDelay = 0;
            });
        }
    });

    const modelViewer = document.querySelector('#ev-model');
    const stopRotation = () => {
        modelViewer.autoRotate = false;
    };

    modelViewer.addEventListener('mousedown', stopRotation);
    modelViewer.addEventListener('touchstart', stopRotation, {passive: true});
    modelViewer.addEventListener('wheel', stopRotation, {passive: true});
</script>

</body>
</html>
